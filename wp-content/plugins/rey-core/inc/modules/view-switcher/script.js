!function(e){"use strict";var t=function(e){this.init=function(){this.config=Object.assign({grid:null,lsSuffix:"",listSelector:""},e||{}),this.loopHeader=this.config.grid.parentElement.querySelector(".rey-loopHeader"),this.loopHeader&&(this.viewSelector=this.loopHeader.querySelector(".rey-viewSelector"),this.viewSelector&&(this.viewSelectorList=this.viewSelector.querySelector(this.config.listSelector),this.viewSelectorList&&(this.viewSelectorsChildren=this.viewSelectorList.querySelectorAll("li"),this.viewSelectorsChildren.length&&(this.lsName="rey-active-view-selector-"+reyParams.site_id+this.config.lsSuffix,this.cols=rey.util.ls.get(this.lsName),this.setDefaults(),this.changeCols(),this.events(),rey.hooks.doAction("view_selector/load",this)))))},this.setColsStyle=function(e){this.isReyGridElement=this.config.grid.closest(".elementor-widget-reycore-product-grid, .elementor-widget-reycore-woo-loop-products"),this.isReyGridElement&&this.config.grid.style.setProperty("--woocommerce-grid-columns",e?"":this.cols)},this.setDefaults=function(){this.colsAttribute="data-cols",this.defaultCols=reyParams.catalog_cols||4,rey.vars.is_mobile&&(this.defaultCols=reyParams.catalog_mobile_cols||2,this.colsAttribute="data-cols-mobile")},this.changeCols=function(){if(this.viewSelector.classList.contains("--is-visible")||this.viewSelector.classList.add("--is-visible"),this.config.grid.classList.contains("--vs-is-visible")||this.config.grid.classList.add("--vs-is-visible"),this.viewSelectorsChildren.forEach((e=>{e.classList.remove("is-active");var t=e.getAttribute("data-count");t&&parseInt(t)==(this.cols||this.defaultCols)&&e.classList.add("is-active")})),this.cols&&(this.config.grid.setAttribute(this.colsAttribute,this.cols),this.setColsStyle(),this.eProGridElement=this.config.grid.closest(".elementor-products-grid"),this.eProGridElement)){var e=this.config.grid.closest(".woocommerce");e&&(e.classList.forEach((t=>{-1!==t.indexOf("columns-")&&e.classList.remove(t)})),e.classList.add("columns-"+this.cols)),this.eProGridElement.classList.forEach((e=>{-1!==e.indexOf("elementor-grid-")&&this.eProGridElement.classList.remove(e)})),this.eProGridElement.classList.add("elementor-grid-"+this.cols)}},this.events=function(){this.viewSelectorsChildren.forEach((e=>{e.addEventListener("click",(e=>{var t=e.currentTarget.getAttribute("data-count")||3;rey.util.ls.set(this.lsName,t,rey.util.expiration.day),this.cols=t,this.changeCols(),rey.hooks.doAction("view_selector/change_cols",this)}))})),window.addEventListener("rey/window/breakpoint",(()=>{this.setColsStyle(!0)}))},this.init()},i=function(e){(e=e||document).querySelectorAll(".woocommerce ul.products:not(.--prevent-change-cols)").forEach((e=>{rey.vars.is_desktop&&new t({grid:e,listSelector:".rey-viewSelector-list-dk"}),rey.vars.is_mobile&&new t({grid:e,lsSuffix:"-mobile",listSelector:".rey-viewSelector-list-mb"})}))};document.addEventListener("rey-DOMContentLoaded",(function(e){i()})),rey.hooks.addAction("ajaxfilters/finished",(function(e){i(e)}))}(jQuery);